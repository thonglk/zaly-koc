{"version":3,"sources":["Carousel.tsx"],"names":["screenWidth","Dimensions","get","width","Pager","color","index","length","styles","pager","Array","from","map","_","i","current","opacity","size","bullet","backgroundColor","height","Carousel","data","children","dotColor","style","rest","setIndex","React","useState","Children","count","itemsLength","slides","isArray","StyleSheet","flatten","slideWidth","slideHeight","container","nativeEvent","layoutWidth","layoutMeasurement","offset","contentOffset","x","currentIndex","Math","ceil","item","uri","child","s","props","cloneElement","create","position","bottom","left","right","flexDirection","justifyContent","alignItems","marginHorizontal","borderRadius","SEED_DATA","name","tag","category","COMPONENT_TYPES","media","description","layout","resizeMode","label"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { withTheme } from \"../theming\";\nimport {\n  ScrollView,\n  View,\n  StyleSheet,\n  Dimensions,\n  StyleProp,\n  ViewStyle,\n} from \"react-native\";\nimport Image from \"./Image\";\nimport {\n  COMPONENT_TYPES,\n  createResizeModeProp,\n  createColorProp,\n} from \"@draftbit/types\";\n\nconst screenWidth = Dimensions.get(\"window\").width;\n\ntype Props = {\n  data?: any[];\n  children?: React.ReactNode;\n  style?: StyleProp<ViewStyle>;\n  dotColor?: string;\n};\n\nfunction Pager({\n  color,\n  index,\n  length,\n}: {\n  color: string;\n  index: number;\n  length: number;\n}) {\n  return (\n    <View style={styles.pager}>\n      {Array.from({ length }).map((_, i) => {\n        const current = index === i;\n        const opacity = current ? 1 : 0.5;\n        const size = current ? 10 : 8;\n        return (\n          <View\n            key={i}\n            style={[\n              styles.bullet,\n              { backgroundColor: color, opacity, width: size, height: size },\n            ]}\n          />\n        );\n      })}\n    </View>\n  );\n}\n\nfunction Carousel({\n  data,\n  children,\n  dotColor = \"strong\",\n  style,\n  ...rest\n}: Props) {\n  const [index, setIndex] = React.useState(0);\n\n  const length = React.Children.count(children);\n  const itemsLength = (data?.length ?? 0) + length;\n  const slides = Array.isArray(data) ? data : [];\n\n  const { width, height } = StyleSheet.flatten(style || {});\n  const slideWidth = width || screenWidth;\n  const slideHeight = height || 250;\n\n  return (\n    <View style={[styles.container, style]} {...rest}>\n      <ScrollView\n        pagingEnabled\n        horizontal\n        decelerationRate=\"fast\"\n        scrollEventThrottle={200}\n        showsHorizontalScrollIndicator={false}\n        onScroll={({ nativeEvent }) => {\n          const layoutWidth = nativeEvent.layoutMeasurement.width;\n          const offset = nativeEvent.contentOffset.x;\n          const currentIndex = Math.ceil(offset / layoutWidth);\n          setIndex(currentIndex);\n        }}\n      >\n        {slides.length > 0\n          ? slides.map((item, i) => {\n              return (\n                <Image\n                  key={i}\n                  resizeMode=\"cover\"\n                  source={typeof item === \"string\" ? { uri: item } : item}\n                  style={[{ width: slideWidth, height: slideHeight }]}\n                />\n              );\n            })\n          : null}\n        {React.Children.map(children, (child: any) => {\n          const s = child?.props?.style || {};\n          return (\n            <View style={{ width: slideWidth }}>\n              {React.cloneElement(child, {\n                style: { ...s, width: slideWidth },\n              })}\n            </View>\n          );\n        })}\n      </ScrollView>\n      <Pager color={dotColor} index={index} length={itemsLength} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    height: 250,\n    position: \"relative\",\n    width: screenWidth,\n    backgroundColor: \"#eee\",\n  },\n  pager: {\n    position: \"absolute\",\n    bottom: 12,\n    left: 0,\n    right: 0,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  bullet: {\n    marginHorizontal: 2,\n    width: 10,\n    height: 10,\n    borderRadius: 20,\n    backgroundColor: \"#000\",\n  },\n});\n\nexport default withTheme(Carousel);\n\nexport const SEED_DATA = [\n  {\n    name: \"Carousel\",\n    tag: \"Carousel\",\n    category: COMPONENT_TYPES.media,\n    description: \"A horizontal scrolling carousel of images\",\n    layout: {},\n    props: {\n      resizeMode: createResizeModeProp(),\n      dotColor: createColorProp({\n        label: \"Dot color\",\n      }),\n    },\n  },\n];\n"]}